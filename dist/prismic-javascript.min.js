!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fetch-everywhere")):"function"==typeof define&&define.amd?define("PrismicJS",["fetch-everywhere"],t):"object"==typeof exports?exports.PrismicJS=t(require("fetch-everywhere")):e.PrismicJS=t(e["fetch-everywhere"])}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(e){this.data={},this.data=e}return e.prototype.id=function(){return this.data.id},e.prototype.ref=function(){return this.data.ref},e.prototype.label=function(){return this.data.label},e}();t.Variation=n;var i=function(){function e(e){this.data={},this.data=e,this.variations=(e.variations||[]).map(function(e){return new n(e)})}return e.prototype.id=function(){return this.data.id},e.prototype.googleId=function(){return this.data.googleId},e.prototype.name=function(){return this.data.name},e}();t.Experiment=i;var o=function(){function e(e){e&&(this.drafts=(e.drafts||[]).map(function(e){return new i(e)}),this.running=(e.running||[]).map(function(e){return new i(e)}))}return e.prototype.current=function(){return this.running.length>0?this.running[0]:null},e.prototype.refFromCookie=function(e){if(!e||""===e.trim())return null;var t=e.trim().split(" ");if(t.length<2)return null;var r=t[0],n=parseInt(t[1],10),i=this.running.filter(function(e){return e.googleId()==r&&e.variations.length>n})[0];return i?i.variations[n].ref():null},e}();t.Experiments=o},function(e,t,r){"use strict";function n(e){return"string"==typeof e?'"'+e+'"':e instanceof Array?"["+e.map(function(e){return n(e)}).join(",")+"]":null}function i(e,r){return"[:d = "+t.Operator.at+"("+e+", "+n(r)+")]"}function o(e,r){return"[:d = "+t.Operator.not+"("+e+", "+n(r)+")]"}function a(e){return"[:d = "+t.Operator.missing+"("+e+")]"}function s(e){return"[:d = "+t.Operator.has+"("+e+")]"}function u(e,r){return"[:d = "+t.Operator.any+"("+e+", "+n(r)+")]"}function f(e,r){return"[:d = "+t.Operator.in+"("+e+", "+n(r)+")]"}function c(e,r){return"[:d = "+t.Operator.fulltext+"("+e+", "+n(r)+")]"}function h(e,r){return"[:d = "+t.Operator.similar+'("'+this.documentId+'", '+this.maxResults+")]"}function d(e,r){return"[:d = "+t.Operator["number.gt"]+"("+e+", "+r+")]"}function p(e,r){return"[:d = "+t.Operator["number.lt"]+"("+e+", "+r+")]"}function l(e,r,n){return"[:d = "+t.Operator["number.inRange"]+"("+e+", "+this.before+", "+this.after+")]"}function m(e,r){return"[:d = "+t.Operator["date.before"]+"("+e+", "+this.before.getTime()+")]"}function y(e,r){return"[:d = "+t.Operator["date.after"]+"("+e+", "+this.after.getTime()+")]"}function v(e,r,n){return"[:d = "+t.Operator["date.between"]+"("+e+", "+this.before.getTime()+", "+this.after.getTime()+")]"}function g(e,r){return"[:d = "+t.Operator["date.day-of-month"]+"("+e+", "+this.day+")]"}function k(e,r){return"[:d = "+t.Operator["date.day-of-month-after"]+"("+e+", "+this.day+")]"}function w(e,r){return"[:d = "+t.Operator["date.day-of-month-before"]+"("+e+", "+this.day+")]"}function b(e,r){return"[:d = "+t.Operator["date.day-of-week"]+"("+e+", "+this.day+")]"}function P(e,r){return"[:d = "+t.Operator["date.day-of-week-after"]+"("+e+", "+this.day+")]"}function O(e,r){return"[:d = "+t.Operator["date.day-of-week-before"]+"("+e+", "+this.day+")]"}function _(e,r){return"number"==typeof this.month?"[:d = "+t.Operator["date.month"]+"("+e+", "+this.month+")]":"[:d = "+t.Operator["date.month"]+"("+e+', "'+this.month+'")]'}function x(e,r){return"number"==typeof this.month?"[:d = "+t.Operator["date.month-before"]+"("+e+", "+this.month+")]":"[:d = "+t.Operator["date.month-before"]+"("+e+', "'+this.month+'")]'}function q(e,r){return"number"==typeof this.month?"[:d = "+t.Operator["date.month-after"]+"("+e+", "+this.month+")]":"[:d = "+t.Operator["date.month-after"]+"("+e+', "'+this.month+'")]'}function D(e,r){return"[:d = "+t.Operator["date.year"]+"("+e+", "+this.year+")]"}function M(e,r){return"[:d = "+t.Operator["date.hour"]+"("+e+", "+this.hour+")]"}function A(e,r){return"[:d = "+t.Operator["date.hour-before"]+"("+e+", "+this.hour+")]"}function C(e,r){return"[:d = "+t.Operator["date.hour-after"]+"("+e+", "+this.hour+")]"}function T(e,r,n,i){return"[:d = "+t.Operator["geopoint.near"]+"("+e+", "+this.latitude+", "+this.longitude+", "+this.radius+")]"}t.__esModule=!0,t.Operator={at:"at",not:"not",missing:"missing",has:"has",any:"any",in:"in",fulltext:"fulltext",similar:"similar","number.gt":"number.gt","number.lt":"number.lt","number.inRange":"number.inRange","date.before":"date.before","date.after":"date.after","date.between":"date.between","date.day-of-month":"date.day-of-month","date.day-of-month-after":"date.day-of-month-after","date.day-of-month-before":"date.day-of-month-before","date.day-of-week":"date.day-of-week","date.day-of-week-after":"date.day-of-week-after","date.day-of-week-before":"date.day-of-week-before","date.month":"date.month","date.month-before":"date.month-before","date.month-after":"date.month-after","date.year":"date.year","date.hour":"date.hour","date.hour-before":"date.hour-before","date.hour-after":"date.hour-after","geopoint.near":"geopoint.near"},t.AtPredicate=i,t.NotPredicate=o,t.MissingPredicate=a,t.HasPredicate=s,t.AnyPredicate=u,t.InPredicate=f,t.FulltextPredicate=c,t.SimilarPredicate=h,t.GtPredicate=d,t.LtPredicate=p,t.InRangePredicate=l,t.DateBeforePredicate=m,t.DateAfterPredicate=y,t.DateBetweenPredicate=v,t.DayOfMonthPredicate=g,t.DayOfMonthAfterPredicate=k,t.DayOfMonthBeforePredicate=w,t.DayOfWeekPredicate=b,t.DayOfWeekAfterPredicate=P,t.DayOfWeekBeforePredicate=O,t.MonthPredicate=_,t.MonthBeforePredicate=x,t.MonthAfterPredicate=q,t.YearPredicate=D,t.HourPredicate=M,t.HourBeforePredicate=A,t.HourAfterPredicate=C,t.NearPredicate=T,t.Predicates={at:i,not:o,missing:a,has:s,any:u,in:f,fulltext:c,similar:h,gt:d,lt:p,inRange:l,before:m,after:y,between:v,dayOfMonth:g,dayOfMonthAfter:k,dayOfMonthBefore:w,dayOfWeek:b,dayOfWeekAfter:P,dayOfWeekBefore:O,month:_,monthBefore:x,monthAfter:q,year:D,hour:M,hourBefore:A,hourAfter:C,near:T}},function(e,t,r){"use strict";function n(e,t){var r=t||{},n=new o.Api(e,r);return new Promise(function(e,t){var i=function(n,i){r.complete&&r.complete(n,i),n?t(n):e(i)};return n.get(function(e,t){!e&&t&&(n.data=t,n.bookmarks=t.bookmarks,n.experiments=new s.Experiments(t.experiments)),i(e,n)}),n})}t.__esModule=!0;var i=r(7),o=r(4),a=r(1),s=r(0);e.exports={experimentCookie:o.ExperimentCookie,previewCookie:o.PreviewCookie,Document:i.Document,SearchForm:o.SearchForm,Form:o.Form,Experiments:s.Experiments,Predicates:a.Predicates,api:n,getApi:n}},function(t,r){t.exports=e},function(e,t,r){"use strict";t.__esModule=!0;var n=r(1),i=r(0),o=r(9),a=r(5),s=r(6);t.PreviewCookie="io.prismic.preview",t.ExperimentCookie="io.prismic.experiment";var u=function(){function e(e,t,r,n,i){this.ref=e,this.label=t,this.isMaster=r,this.scheduledAt=n,this.id=i}return e}();t.Ref=u;var f=function(){function e(e,t,r,n,i,o){this.fields=e,this.action=t,this.name=r,this.rel=n,this.form_method=i,this.enctype=o}return e.prototype.getField=function(e){return this.fields[e]},e.prototype.getFieldSafe=function(e){var t=this.fields[e];if(!t)throw new Error("Missing field "+t+" in form fields "+this.fields);return t},e}();t.Form=f;var c=function(){function e(e,t,r){this.api=e,this.form=t,this.data=r||{};for(var n in t.fields)t.getFieldSafe(n).default&&(this.data[n]=[t.fields[n].default])}return e.prototype.set=function(e,t){var r=this.form.getField(e);if(!r)throw new Error("Unknown field "+e);var n=""===t||void 0===t?null:t,i=this.data[e]||[];return i=r.multiple?n?i.concat([n]):i:n?[n]:i,this.data[e]=i,this},e.prototype.ref=function(e){return this.set("ref",e)},e.prototype.query=function(e){if("string"==typeof e)return this.query([e]);if(e instanceof Array)return this.set("q","["+e.join("")+"]");throw new Error("Invalid query : "+e)},e.prototype.pageSize=function(e){return this.set("pageSize",e)},e.prototype.fetch=function(e){var t=e instanceof Array?e.join(","):e;return this.set("fetch",t)},e.prototype.fetchLinks=function(e){var t=e instanceof Array?e.join(","):e;return this.set("fetchLinks",t)},e.prototype.lang=function(e){return this.set("lang",e)},e.prototype.page=function(e){return this.set("page",e)},e.prototype.orderings=function(e){return e?this.set("orderings","["+e.join(",")+"]"):this},e.prototype.submit=function(e){var t=this.form.action;if(this.data){var r=t.indexOf("?")>-1?"&":"?";for(var n in this.data)if(this.data.hasOwnProperty(n)){var i=this.data[n];if(i)for(var o=0;o<i.length;o++)t+=r+n+"="+encodeURIComponent(i[o]),r="&"}}return this.api.request(t,e)},e}();t.SearchForm=c;var h=function(){function e(e,t,r,n,i,o,a,s){this.page=e,this.results_per_page=t,this.results_size=r,this.total_results_size=n,this.total_pages=i,this.next_page=o,this.prev_page=a,this.results=s}return e}();t.ApiResponse=h;var d=function(){function e(e,t){var r=t||{};return this.accessToken=r.accessToken,this.url=e+(this.accessToken?(e.indexOf("?")>-1?"&":"?")+"access_token="+this.accessToken:""),this.req=r.req,this.apiCache=r.apiCache||new a.DefaultApiCache,this.requestHandler=r.requestHandler||new o.DefaultRequestHandler,this.apiCacheKey=this.url+(this.accessToken?"#"+this.accessToken:""),this.apiDataTTL=r.apiDataTTL||5,this}return e.prototype.get=function(e){var t=this,r=this.apiCacheKey;return new Promise(function(n,i){var o=function(t,r,o,a){e&&e(t,r,o,a),r&&n(r),t&&i(t)};t.apiCache.get(r,function(e,n){if(e||n)return void o(e,n);t.requestHandler.request(t.url,function(e,n,i,a){if(e)return void o(e,null,i,a);var s=t.parse(n);a=a||t.apiDataTTL,t.apiCache.set(r,s,a,function(e){o(e,s,i,a)})})})})},e.prototype.refresh=function(e){var t=this.apiCacheKey;return new Promise(function(r,n){var o=this,a=function(t,i,o){e&&e(t,i,o),i&&r(i),t&&n(t)};this.apiCache.remove(t,function(e){if(e)return void a(e);o.get(function(e,t){if(e)return void a(e);o.data=t,o.bookmarks=t.bookmarks,o.experiments=new i.Experiments(t.experiments),a()})})})},e.prototype.parse=function(e){var t=this,r=Object.keys(e.forms||[]).reduce(function(r,n,i){if(e.forms.hasOwnProperty(n)){var o=e.forms[n];t.accessToken&&(o.fields.access_token={},o.fields.access_token.type="string",o.fields.access_token.default=t.accessToken);var a=new f(o.fields,o.action,o.name,o.rel,o.form_method,o.enctype);return r[n]=a,r}return r},{}),n=e.refs.map(function(e){return new u(e.ref,e.label,e.isMasterRef,e.scheduledAt,e.id)})||[],i=n.filter(function(e){return!0===e.isMaster}),o=e.types,a=e.tags;if(0===i.length)throw"No master ref.";return{bookmarks:e.bookmarks||{},refs:n,forms:r,master:i[0],types:o,tags:a,experiments:e.experiments,oauthInitiate:e.oauth_initiate,oauthToken:e.oauth_token,quickRoutes:e.quickRoutes}},e.prototype.form=function(e){var t=this.data.forms[e];return t?new c(this,t,{}):null},e.prototype.everything=function(){var e=this.form("everything");if(!e)throw new Error("Missing everything form");return e},e.prototype.master=function(){return this.data.master.ref},e.prototype.ref=function(e){for(var t=0;t<this.data.refs.length;t++)if(this.data.refs[t].label==e)return this.data.refs[t].ref;return null},e.prototype.currentExperiment=function(){return this.experiments.current()},e.prototype.quickRoutesEnabled=function(){return this.data.quickRoutes.enabled},e.prototype.getQuickRoutes=function(e){var t=this;return new Promise(function(r,n){t.requestHandler.request(t.data.quickRoutes.url,function(t,i,o){e&&e(t,i,o),t&&n(t),i&&r(i)})})},e.prototype.query=function(e,r,n){var i="function"==typeof r?{options:{},callback:r}:{options:r||{},callback:n},o=i.options,a=i.callback,u=o,f=this.everything();for(var c in u)f=f.set(c,u[c]);if(!u.ref){var h="";this.req?h=this.req.headers.cookie||"":"undefined"!=typeof window&&window.document&&(h=window.document.cookie||"");var d=s.default.parse(h),p=d[t.PreviewCookie],l=this.experiments.refFromCookie(d[t.ExperimentCookie]);f=f.ref(p||l||this.master())}return e&&f.query(e),f.submit(a)},e.prototype.queryFirst=function(e,t,r){var n="function"==typeof t?{options:{},callback:t}:{options:t||{},callback:r},i=n.options,o=n.callback,a=i;return a.page=1,a.pageSize=1,this.query(e,a,function(e,t){if(o){var r=t&&t.results&&t.results[0];o(e,r)}}).then(function(e){return e&&e.results&&e.results[0]}).catch(function(e){console.log(e)})},e.prototype.getByID=function(e,t,r){return t=t||{},t.lang||(t.lang="*"),this.queryFirst(n.Predicates.at("document.id",e),t,r)},e.prototype.getByIDs=function(e,t,r){return t=t||{},t.lang||(t.lang="*"),this.query(n.Predicates.in("document.id",e),t,r)},e.prototype.getByUID=function(e,t,r,i){return r=r||{},r.lang||(r.lang="*"),this.queryFirst(n.Predicates.at("my."+e+".uid",t),r,i)},e.prototype.getSingle=function(e,t,r){return this.queryFirst(n.Predicates.at("document.type",e),t,r)},e.prototype.getBookmark=function(e,t,r){return new Promise(function(t,n){var i=this.bookmarks[e];if(i)t(i);else{var o=new Error("Error retrieving bookmarked id");r&&r(o),n(o)}}).then(function(e){return this.getByID(e,t,r)})},e.prototype.previewSession=function(e,t,r,i){var o=this;return new Promise(function(a,s){var u=function(e,t,r){i&&i(e,t,r),e?s(e):a(t)};o.requestHandler.request(e,function(i,a,s){if(i)return void u(i,r,s);try{var f=a.mainDocument;f?o.everything().query(n.Predicates.at("document.id",f)).ref(e).lang("*").submit(function(e,n){e&&u(e);try{0===n.results.length?u(null,r,s):u(null,t(n.results[0]),s)}catch(e){u(e)}}):u(null,r,s)}catch(e){u(e,r,s)}})})},e.prototype.request=function(e,t){function r(t){o.get(i,function(r,a){if(r||a)return void t(r,n.response(a));n.requestHandler.request(e,function(e,r,a,s){if(e)return void t(e,null,a);s?o.set(i,r,s,function(e){t(e,n.response(r))}):t(null,n.response(r))})})}var n=this,i=e+(this.accessToken?"#"+this.accessToken:""),o=this.apiCache;return new Promise(function(e,n){r(function(r,i,o){t&&t(r,i,o),r&&n(r),i&&e(i)})})},e.prototype.getNextPage=function(e,t){return this.request(e+(this.accessToken?"&access_token="+this.accessToken:""),t)},e.prototype.response=function(e){return new h(e.page,e.results_per_page,e.results_size,e.total_results_size,e.total_pages,e.next_page,e.prev_page,e.results||[])},e}();t.Api=d},function(e,t,r){"use strict";t.__esModule=!0;var n=r(8),i=function(){function e(e){this.lru=n.MakeLRUCache(e)}return e.prototype.isExpired=function(e){var t=this.lru.get(e,!1);return!!t&&0!==t.expiredIn&&t.expiredIn<Date.now()},e.prototype.get=function(e,t){var r=this.lru.get(e,!1);r&&!this.isExpired(e)?t(null,r.data):t()},e.prototype.set=function(e,t,r,n){this.lru.remove(e),this.lru.put(e,{data:t,expiredIn:r?Date.now()+1e3*r:0}),n()},e.prototype.remove=function(e,t){this.lru.remove(e),t()},e.prototype.clear=function(e){this.lru.removeAll(),e()},e}();t.DefaultApiCache=i},function(e,t,r){"use strict";function n(e,t){try{return t(e)}catch(t){return e}}function i(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");var r={},i=t||{},a=i.decode||o;return e.split(/; */).forEach(function(e){var t=e.indexOf("=");if(!(t<0)){var i=e.substr(0,t).trim(),o=e.substr(++t,e.length).trim();'"'==o[0]&&(o=o.slice(1,-1)),void 0==r[i]&&(r[i]=n(o,a))}}),r}t.__esModule=!0;var o=decodeURIComponent;t.default={parse:i}},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(e,t,r,n,i,o,a,s,u,f,c,h){this.id=e,this.uid=c,this.type=t,this.href=r,this.tags=n,this.slug=i[0],this.slugs=o,this.lang=h,this.alternateLanguages=a,this.firstPublicationDate=s?new Date(s):null,this.lastPublicationDate=u?new Date(u):null,this.data=f}return e}();t.Document=n;var i=function(){function e(e){this.data=e}return e}();t.GroupDoc=i},function(e,t,r){"use strict";function n(e){return new i(e)}function i(e){this.size=0,this.limit=e,this._keymap={}}t.__esModule=!0,t.MakeLRUCache=n,i.prototype.put=function(e,t){var r={key:e,value:t};if(this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return this.shift();this.size++},i.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),console.log("purging ",e.key),e},i.prototype.get=function(e,t){var r=this._keymap[e];if(void 0!==r)return r===this.tail?t?r:r.value:(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r,t?r:r.value)},i.prototype.find=function(e){return this._keymap[e]},i.prototype.set=function(e,t){var r,n=this.get(e,!0);return n?(r=n.value,n.value=t):(r=this.put(e,t))&&(r=r.value),r},i.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value},i.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?i.prototype.keys=function(){return Object.keys(this._keymap)}:i.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},i.prototype.forEach=function(e,t,r){var n;if(!0===t?(r=!0,t=void 0):"object"!=typeof t&&(t=this),r)for(n=this.tail;n;)e.call(t,n.key,n.value,this),n=n.older;else for(n=this.head;n;)e.call(t,n.key,n.value,this),n=n.newer},i.prototype.toString=function(){for(var e="",t=this.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e}},function(e,t,r){"use strict";function n(e,t){return{name:"prismic-request-error",message:t,status:e}}function i(e,t,r){return fetch(e,{headers:{Accept:"application/json"}}).then(function(t){if(~~(t.status/100!=2))throw n(t.status,"Unexpected status code ["+t.status+"] on URL "+e);return t.json().then(function(e){return{response:t,json:e}})}).then(function(e){var r=e.response,n=e.json,i=r.headers["cache-control"],o=i?/max-age=(\d+)/.exec(i):null,a=o?parseInt(o[1],10):void 0;t({result:n,xhr:r,ttl:a})}).catch(function(e){r({error:e})})}function o(){if(!(0===u.length||s>=a)){s++;var e=u.shift();i(e.url,function(t){var r=t.result,n=t.xhr,i=t.ttl;s--,e.callback(null,r,n,i),o()},function(t){var r=t.error;s--,e.callback(r),o()})}}t.__esModule=!0;var a=20,s=0,u=[],f=function(){function e(){}return e.prototype.request=function(e,t){u.push({url:e,callback:t}),o()},e}();t.DefaultRequestHandler=f},function(e,t,r){r(3),e.exports=r(2)}])});